#! /opt/homebrew/Cellar/icarus-verilog/12.0/bin/vvp
:ivl_version "12.0 (stable)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision - 9;
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/system.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/vhdl_sys.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/vhdl_textio.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/v2005_math.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/va_math.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/v2009.vpi";
S_0x100e6a450 .scope package, "$unit" "$unit" 2 1;
 .timescale 0 0;
S_0x100e6a5d0 .scope module, "tb_top_system" "tb_top_system" 3 4;
 .timescale -9 -9;
P_0x100e72be0 .param/l "CLK_HALF" 1 3 28, +C4<00000000000000000000000000110010>;
P_0x100e72c20 .param/l "FUNCTION_ALIGN_LEFT" 1 3 42, C4<00>;
P_0x100e72c60 .param/l "FUNCTION_ALIGN_RIGHT" 1 3 43, C4<01>;
P_0x100e72ca0 .param/l "FUNCTION_RANGE_BETWEEN_COMPARES" 1 3 44, C4<10>;
P_0x100e72ce0 .param/l "REG_COMPARE1" 1 3 33, C4<000011>;
P_0x100e72d20 .param/l "REG_COMPARE2" 1 3 34, C4<000101>;
P_0x100e72d60 .param/l "REG_COUNTER_EN" 1 3 32, C4<000010>;
P_0x100e72da0 .param/l "REG_COUNTER_RESET" 1 3 35, C4<000111>;
P_0x100e72de0 .param/l "REG_COUNTER_VAL" 1 3 36, C4<001000>;
P_0x100e72e20 .param/l "REG_FUNCTIONS" 1 3 40, C4<001101>;
P_0x100e72e60 .param/l "REG_PERIOD" 1 3 31, C4<000000>;
P_0x100e72ea0 .param/l "REG_PRESCALE" 1 3 37, C4<001010>;
P_0x100e72ee0 .param/l "REG_PWM_EN" 1 3 39, C4<001100>;
P_0x100e72f20 .param/l "REG_UPNOTDOWN" 1 3 38, C4<001011>;
P_0x100e72f60 .param/l "SCLK_HALF" 1 3 29, +C4<00000000000000000000000000110010>;
v0x7e2848500_0 .var "clk", 0 0;
v0x7e28485a0_0 .var "counter_lsb", 7 0;
v0x7e2848640_0 .var "cs_n", 0 0;
v0x7e28486e0_0 .net "pwm_out", 0 0, L_0x7e3036290;  1 drivers
v0x7e2848780_0 .var "rst_n", 0 0;
v0x7e2848820_0 .var "sclk", 0 0;
v0x7e28488c0_0 .net "tb_miso", 0 0, L_0x7e3035b20;  1 drivers
v0x7e2848960_0 .var "tb_mosi", 0 0;
S_0x100e72fe0 .scope task, "apply_reset" "apply_reset" 3 68, 3 68 0, S_0x100e6a5d0;
 .timescale -9 -9;
TD_tb_top_system.apply_reset ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x7e2848780_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x7e2848640_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x7e2848820_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x7e2848960_0, 0, 1;
    %delay 500, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x7e2848780_0, 0, 1;
    %delay 250, 0;
    %vpi_call/w 3 77 "$display", "Time %0t: Reset deasserted.", $time {0 0 0};
    %end;
S_0x100e6b2c0 .scope task, "check_pwm_duty" "check_pwm_duty" 3 141, 3 141 0, S_0x100e6a5d0;
 .timescale -9 -9;
v0x100e73160_0 .var/i "exp", 31 0;
v0x100e6b440_0 .var/i "high_count", 31 0;
v0x100e6b4e0_0 .var/i "high_per_period", 31 0;
v0x100e69ad0_0 .var/i "i", 31 0;
v0x100e69b70_0 .var/i "num_periods", 31 0;
v0x100e69c10_0 .var/i "period_val", 31 0;
v0x100e69cb0_0 .var/i "total_ticks", 31 0;
E_0x7e3076480 .event posedge, v0x100e67490_0;
TD_tb_top_system.check_pwm_duty ;
    %load/vec4 v0x100e69c10_0;
    %addi 1, 0, 32;
    %load/vec4 v0x100e69b70_0;
    %mul;
    %store/vec4 v0x100e69cb0_0, 0, 32;
    %load/vec4 v0x100e6b4e0_0;
    %load/vec4 v0x100e69b70_0;
    %mul;
    %store/vec4 v0x100e73160_0, 0, 32;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x100e6b440_0, 0, 32;
    %delay 250, 0;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x100e69ad0_0, 0, 32;
T_1.0 ;
    %load/vec4 v0x100e69ad0_0;
    %load/vec4 v0x100e69cb0_0;
    %cmp/s;
    %jmp/0xz T_1.1, 5;
    %wait E_0x7e3076480;
    %load/vec4 v0x7e28486e0_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_1.2, 8;
    %load/vec4 v0x100e6b440_0;
    %addi 1, 0, 32;
    %store/vec4 v0x100e6b440_0, 0, 32;
T_1.2 ;
    %load/vec4 v0x100e69ad0_0;
    %addi 1, 0, 32;
    %store/vec4 v0x100e69ad0_0, 0, 32;
    %jmp T_1.0;
T_1.1 ;
    %load/vec4 v0x100e73160_0;
    %subi 1, 0, 32;
    %load/vec4 v0x100e6b440_0;
    %cmp/s;
    %flag_or 5, 4;
    %flag_get/vec4 5;
    %jmp/0 T_1.6, 5;
    %load/vec4 v0x100e6b440_0;
    %load/vec4 v0x100e73160_0;
    %addi 1, 0, 32;
    %cmp/s;
    %flag_get/vec4 4;
    %flag_get/vec4 5;
    %or;
    %and;
T_1.6;
    %flag_set/vec4 8;
    %jmp/0xz  T_1.4, 8;
    %vpi_call/w 3 163 "$display", "[PASS] PWM duty aprox. corect: high=%0d, expected ~%0d", v0x100e6b440_0, v0x100e73160_0 {0 0 0};
    %jmp T_1.5;
T_1.4 ;
    %vpi_call/w 3 166 "$display", "[FAIL] PWM duty incorect: high=%0d, expected %0d", v0x100e6b440_0, v0x100e73160_0 {0 0 0};
T_1.5 ;
    %end;
S_0x100e67ea0 .scope module, "dut" "top" 3 18, 4 5 0, S_0x100e6a5d0;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "rst_n";
    .port_info 2 /INPUT 1 "sclk";
    .port_info 3 /INPUT 1 "cs_n";
    .port_info 4 /INPUT 1 "miso";
    .port_info 5 /OUTPUT 1 "mosi";
    .port_info 6 /OUTPUT 1 "pwm_out";
v0x7e2846e40_0 .net "addr", 5 0, L_0x7e3035c70;  1 drivers
v0x7e2846ee0_0 .net "byte_sync", 0 0, L_0x7e3035a40;  1 drivers
v0x7e2846f80_0 .net "clk", 0 0, v0x7e2848500_0;  1 drivers
v0x7e2847020_0 .net "compare1", 15 0, L_0x7e30360d0;  1 drivers
v0x7e28470c0_0 .net "compare2", 15 0, L_0x7e3036140;  1 drivers
v0x7e2847160_0 .net "count_reset", 0 0, L_0x7e3035ea0;  1 drivers
v0x7e2847200_0 .net "counter_val", 15 0, L_0x7e3036220;  1 drivers
v0x7e28472a0_0 .net "cs_n", 0 0, v0x7e2848640_0;  1 drivers
v0x7e2847340_0 .net "data_in", 7 0, L_0x7e3035ab0;  1 drivers
v0x7e28473e0_0 .net "data_out", 7 0, L_0x7e3035ce0;  1 drivers
v0x7e2847480_0 .net "data_read", 7 0, L_0x7e30361b0;  1 drivers
v0x7e2847520_0 .net "data_write", 7 0, L_0x7e3035d50;  1 drivers
v0x7e28475c0_0 .net "en", 0 0, L_0x7e3035e30;  1 drivers
v0x7e2847660_0 .net "functions", 7 0, L_0x7e3036060;  1 drivers
v0x7e2847700_0 .net "miso", 0 0, v0x7e2848960_0;  1 drivers
v0x7e28477a0_0 .net "mosi", 0 0, L_0x7e3035b20;  alias, 1 drivers
v0x7e2847840_0 .net "period", 15 0, L_0x7e3035dc0;  1 drivers
v0x7e28478e0_0 .net "prescale", 7 0, L_0x7e3035f80;  1 drivers
v0x7e2847980_0 .net "pwm_en", 0 0, L_0x7e3035ff0;  1 drivers
v0x7e2847a20_0 .net "pwm_out", 0 0, L_0x7e3036290;  alias, 1 drivers
v0x7e2847ac0_0 .net "read", 0 0, L_0x7e3035b90;  1 drivers
v0x7e2847b60_0 .net "rst_n", 0 0, v0x7e2848780_0;  1 drivers
v0x7e2847c00_0 .net "sclk", 0 0, v0x7e2848820_0;  1 drivers
v0x7e2847ca0_0 .net "upnotdown", 0 0, L_0x7e3035f10;  1 drivers
v0x7e2847d40_0 .net "write", 0 0, L_0x7e3035c00;  1 drivers
S_0x100e68020 .scope module, "i_counter" "counter" 4 102, 5 1 0, S_0x100e67ea0;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "rst_n";
    .port_info 2 /OUTPUT 16 "count_val";
    .port_info 3 /INPUT 16 "period";
    .port_info 4 /INPUT 1 "en";
    .port_info 5 /INPUT 1 "count_reset";
    .port_info 6 /INPUT 1 "upnotdown";
    .port_info 7 /INPUT 8 "prescale";
L_0x7e3036220 .functor BUFZ 16, v0x100e65ae0_0, C4<0000000000000000>, C4<0000000000000000>, C4<0000000000000000>;
v0x100e67490_0 .net "clk", 0 0, v0x7e2848500_0;  alias, 1 drivers
v0x100e67530_0 .net "count_reset", 0 0, L_0x7e3035ea0;  alias, 1 drivers
v0x100e675d0_0 .net "count_val", 15 0, L_0x7e3036220;  alias, 1 drivers
v0x100e65ae0_0 .var "count_val_r", 15 0;
v0x100e65b80_0 .net "en", 0 0, L_0x7e3035e30;  alias, 1 drivers
v0x7e2844000_0 .net "period", 15 0, L_0x7e3035dc0;  alias, 1 drivers
v0x7e28440a0_0 .net "prescale", 7 0, L_0x7e3035f80;  alias, 1 drivers
v0x7e2844140_0 .var "prescale_cnt", 7 0;
v0x7e28441e0_0 .net "rst_n", 0 0, v0x7e2848780_0;  alias, 1 drivers
v0x7e2844280_0 .net "upnotdown", 0 0, L_0x7e3035f10;  alias, 1 drivers
E_0x7e30764c0/0 .event negedge, v0x7e28441e0_0;
E_0x7e30764c0/1 .event posedge, v0x100e67490_0;
E_0x7e30764c0 .event/or E_0x7e30764c0/0, E_0x7e30764c0/1;
S_0x100e65c20 .scope module, "i_instr_dcd" "instr_dcd" 4 63, 6 1 0, S_0x100e67ea0;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "rst_n";
    .port_info 2 /INPUT 1 "byte_sync";
    .port_info 3 /INPUT 8 "data_in";
    .port_info 4 /OUTPUT 8 "data_out";
    .port_info 5 /OUTPUT 1 "read";
    .port_info 6 /OUTPUT 1 "write";
    .port_info 7 /OUTPUT 6 "addr";
    .port_info 8 /INPUT 8 "data_read";
    .port_info 9 /OUTPUT 8 "data_write";
P_0x7e3078200 .param/l "S_CMD" 1 6 29, C4<0>;
P_0x7e3078240 .param/l "S_DATA" 1 6 30, C4<1>;
L_0x7e3035b90 .functor BUFZ 1, v0x7e2844a00_0, C4<0>, C4<0>, C4<0>;
L_0x7e3035c00 .functor BUFZ 1, v0x7e2844d20_0, C4<0>, C4<0>, C4<0>;
L_0x7e3035c70 .functor BUFZ 6, v0x7e28443c0_0, C4<000000>, C4<000000>, C4<000000>;
L_0x7e3035ce0 .functor BUFZ 8, v0x7e28446e0_0, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x7e3035d50 .functor BUFZ 8, v0x7e28448c0_0, C4<00000000>, C4<00000000>, C4<00000000>;
v0x7e2844320_0 .net "addr", 5 0, L_0x7e3035c70;  alias, 1 drivers
v0x7e28443c0_0 .var "addr_r", 5 0;
v0x7e2844460_0 .net "byte_sync", 0 0, L_0x7e3035a40;  alias, 1 drivers
v0x7e2844500_0 .net "clk", 0 0, v0x7e2848500_0;  alias, 1 drivers
v0x7e28445a0_0 .net "data_in", 7 0, L_0x7e3035ab0;  alias, 1 drivers
v0x7e2844640_0 .net "data_out", 7 0, L_0x7e3035ce0;  alias, 1 drivers
v0x7e28446e0_0 .var "data_out_r", 7 0;
v0x7e2844780_0 .net "data_read", 7 0, L_0x7e30361b0;  alias, 1 drivers
v0x7e2844820_0 .net "data_write", 7 0, L_0x7e3035d50;  alias, 1 drivers
v0x7e28448c0_0 .var "data_write_r", 7 0;
v0x7e2844960_0 .net "read", 0 0, L_0x7e3035b90;  alias, 1 drivers
v0x7e2844a00_0 .var "read_r", 0 0;
v0x7e2844aa0_0 .net "rst_n", 0 0, v0x7e2848780_0;  alias, 1 drivers
v0x7e2844b40_0 .var "rw_bit", 0 0;
v0x7e2844be0_0 .var "state", 0 0;
v0x7e2844c80_0 .net "write", 0 0, L_0x7e3035c00;  alias, 1 drivers
v0x7e2844d20_0 .var "write_r", 0 0;
S_0x100e73980 .scope module, "i_pwm_gen" "pwm_gen" 4 116, 7 1 0, S_0x100e67ea0;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "rst_n";
    .port_info 2 /INPUT 1 "pwm_en";
    .port_info 3 /INPUT 16 "period";
    .port_info 4 /INPUT 8 "functions";
    .port_info 5 /INPUT 16 "compare1";
    .port_info 6 /INPUT 16 "compare2";
    .port_info 7 /INPUT 16 "count_val";
    .port_info 8 /OUTPUT 1 "pwm_out";
L_0x7e3036290 .functor BUFZ 1, v0x7e28452c0_0, C4<0>, C4<0>, C4<0>;
v0x7e2844dc0_0 .net "clk", 0 0, v0x7e2848500_0;  alias, 1 drivers
v0x7e2844e60_0 .net "compare1", 15 0, L_0x7e30360d0;  alias, 1 drivers
v0x7e2844f00_0 .net "compare2", 15 0, L_0x7e3036140;  alias, 1 drivers
v0x7e2844fa0_0 .net "count_val", 15 0, L_0x7e3036220;  alias, 1 drivers
v0x7e2845040_0 .net "functions", 7 0, L_0x7e3036060;  alias, 1 drivers
v0x7e28450e0_0 .net "period", 15 0, L_0x7e3035dc0;  alias, 1 drivers
v0x7e2845180_0 .net "pwm_en", 0 0, L_0x7e3035ff0;  alias, 1 drivers
v0x7e2845220_0 .net "pwm_out", 0 0, L_0x7e3036290;  alias, 1 drivers
v0x7e28452c0_0 .var "pwm_out_r", 0 0;
v0x7e2845360_0 .net "rst_n", 0 0, v0x7e2848780_0;  alias, 1 drivers
S_0x100e73b00 .scope module, "i_regs" "regs" 4 79, 8 1 0, S_0x100e67ea0;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "rst_n";
    .port_info 2 /INPUT 1 "read";
    .port_info 3 /INPUT 1 "write";
    .port_info 4 /INPUT 6 "addr";
    .port_info 5 /OUTPUT 8 "data_read";
    .port_info 6 /INPUT 8 "data_write";
    .port_info 7 /INPUT 16 "counter_val";
    .port_info 8 /OUTPUT 16 "period";
    .port_info 9 /OUTPUT 1 "en";
    .port_info 10 /OUTPUT 1 "count_reset";
    .port_info 11 /OUTPUT 1 "upnotdown";
    .port_info 12 /OUTPUT 8 "prescale";
    .port_info 13 /OUTPUT 1 "pwm_en";
    .port_info 14 /OUTPUT 8 "functions";
    .port_info 15 /OUTPUT 16 "compare1";
    .port_info 16 /OUTPUT 16 "compare2";
L_0x7e3035dc0 .functor BUFZ 16, v0x7e2845fe0_0, C4<0000000000000000>, C4<0000000000000000>, C4<0000000000000000>;
L_0x7e3035e30 .functor BUFZ 1, v0x7e2845ea0_0, C4<0>, C4<0>, C4<0>;
L_0x7e3035ea0 .functor BUFZ 1, v0x7e2845d60_0, C4<0>, C4<0>, C4<0>;
L_0x7e3035f10 .functor BUFZ 1, v0x7e28461c0_0, C4<0>, C4<0>, C4<0>;
L_0x7e3035f80 .functor BUFZ 8, v0x7e2846080_0, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x7e3035ff0 .functor BUFZ 1, v0x7e2846120_0, C4<0>, C4<0>, C4<0>;
L_0x7e3036060 .functor BUFZ 8, v0x7e2845f40_0, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x7e30360d0 .functor BUFZ 16, v0x7e2845c20_0, C4<0000000000000000>, C4<0000000000000000>, C4<0000000000000000>;
L_0x7e3036140 .functor BUFZ 16, v0x7e2845cc0_0, C4<0000000000000000>, C4<0000000000000000>, C4<0000000000000000>;
L_0x7e30361b0 .functor BUFZ 8, v0x7e2845e00_0, C4<00000000>, C4<00000000>, C4<00000000>;
v0x7e2845400_0 .net "addr", 5 0, L_0x7e3035c70;  alias, 1 drivers
v0x7e28454a0_0 .net "clk", 0 0, v0x7e2848500_0;  alias, 1 drivers
v0x7e2845540_0 .net "compare1", 15 0, L_0x7e30360d0;  alias, 1 drivers
v0x7e28455e0_0 .net "compare2", 15 0, L_0x7e3036140;  alias, 1 drivers
v0x7e2845680_0 .net "count_reset", 0 0, L_0x7e3035ea0;  alias, 1 drivers
v0x7e2845720_0 .net "counter_val", 15 0, L_0x7e3036220;  alias, 1 drivers
v0x7e28457c0_0 .net "data_read", 7 0, L_0x7e30361b0;  alias, 1 drivers
v0x7e2845860_0 .net "data_write", 7 0, L_0x7e3035d50;  alias, 1 drivers
v0x7e2845900_0 .net "en", 0 0, L_0x7e3035e30;  alias, 1 drivers
v0x7e28459a0_0 .net "functions", 7 0, L_0x7e3036060;  alias, 1 drivers
v0x7e2845a40_0 .net "period", 15 0, L_0x7e3035dc0;  alias, 1 drivers
v0x7e2845ae0_0 .net "prescale", 7 0, L_0x7e3035f80;  alias, 1 drivers
v0x7e2845b80_0 .net "pwm_en", 0 0, L_0x7e3035ff0;  alias, 1 drivers
v0x7e2845c20_0 .var "r_compare1", 15 0;
v0x7e2845cc0_0 .var "r_compare2", 15 0;
v0x7e2845d60_0 .var "r_count_reset", 0 0;
v0x7e2845e00_0 .var "r_data_read", 7 0;
v0x7e2845ea0_0 .var "r_en", 0 0;
v0x7e2845f40_0 .var "r_functions", 7 0;
v0x7e2845fe0_0 .var "r_period", 15 0;
v0x7e2846080_0 .var "r_prescale", 7 0;
v0x7e2846120_0 .var "r_pwm_en", 0 0;
v0x7e28461c0_0 .var "r_upnotdown", 0 0;
v0x7e2846260_0 .net "read", 0 0, L_0x7e3035b90;  alias, 1 drivers
v0x7e2846300_0 .net "rst_n", 0 0, v0x7e2848780_0;  alias, 1 drivers
v0x7e28463a0_0 .net "upnotdown", 0 0, L_0x7e3035f10;  alias, 1 drivers
v0x7e2846440_0 .net "write", 0 0, L_0x7e3035c00;  alias, 1 drivers
E_0x7e3076500/0 .event anyedge, v0x7e2844960_0, v0x7e2844320_0, v0x7e2845fe0_0, v0x7e2845ea0_0;
E_0x7e3076500/1 .event anyedge, v0x7e2845c20_0, v0x7e2845cc0_0, v0x100e675d0_0, v0x7e2846080_0;
E_0x7e3076500/2 .event anyedge, v0x7e28461c0_0, v0x7e2846120_0, v0x7e2845f40_0;
E_0x7e3076500 .event/or E_0x7e3076500/0, E_0x7e3076500/1, E_0x7e3076500/2;
S_0x100e73f40 .scope module, "i_spi_bridge" "spi_bridge" 4 46, 9 1 0, S_0x100e67ea0;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "rst_n";
    .port_info 2 /INPUT 1 "sclk";
    .port_info 3 /INPUT 1 "cs_n";
    .port_info 4 /INPUT 1 "mosi";
    .port_info 5 /OUTPUT 1 "miso";
    .port_info 6 /OUTPUT 1 "byte_sync";
    .port_info 7 /OUTPUT 8 "data_in";
    .port_info 8 /INPUT 8 "data_out";
L_0x7e3035a40 .functor BUFZ 1, v0x7e2846a80_0, C4<0>, C4<0>, C4<0>;
L_0x7e3035ab0 .functor BUFZ 8, v0x7e2846b20_0, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x7e3035b20 .functor BUFZ 1, v0x7e2846bc0_0, C4<0>, C4<0>, C4<0>;
v0x7e28464e0_0 .var "bit_cnt", 2 0;
v0x7e2846580_0 .var "byte_ready", 0 0;
v0x7e2846620_0 .net "byte_sync", 0 0, L_0x7e3035a40;  alias, 1 drivers
v0x7e28466c0_0 .net "clk", 0 0, v0x7e2848500_0;  alias, 1 drivers
v0x7e2846760_0 .net "cs_n", 0 0, v0x7e2848640_0;  alias, 1 drivers
v0x7e2846800_0 .net "data_in", 7 0, L_0x7e3035ab0;  alias, 1 drivers
v0x7e28468a0_0 .net "data_out", 7 0, L_0x7e3035ce0;  alias, 1 drivers
v0x7e2846940_0 .net "miso", 0 0, L_0x7e3035b20;  alias, 1 drivers
v0x7e28469e0_0 .net "mosi", 0 0, v0x7e2848960_0;  alias, 1 drivers
v0x7e2846a80_0 .var "r_byte_sync", 0 0;
v0x7e2846b20_0 .var "r_data_in", 7 0;
v0x7e2846bc0_0 .var "r_miso", 0 0;
v0x7e2846c60_0 .net "rst_n", 0 0, v0x7e2848780_0;  alias, 1 drivers
v0x7e2846d00_0 .net "sclk", 0 0, v0x7e2848820_0;  alias, 1 drivers
v0x7e2846da0_0 .var "shift_reg", 7 0;
E_0x7e3076540/0 .event negedge, v0x7e28441e0_0, v0x7e2846d00_0;
E_0x7e3076540/1 .event posedge, v0x7e2846760_0;
E_0x7e3076540 .event/or E_0x7e3076540/0, E_0x7e3076540/1;
E_0x7e3076580/0 .event negedge, v0x7e28441e0_0;
E_0x7e3076580/1 .event posedge, v0x7e2846760_0, v0x7e2846d00_0;
E_0x7e3076580 .event/or E_0x7e3076580/0, E_0x7e3076580/1;
S_0x100e742a0 .scope task, "spi_read_reg" "spi_read_reg" 3 120, 3 120 0, S_0x100e6a5d0;
 .timescale -9 -9;
v0x7e2847de0_0 .var "addr", 5 0;
v0x7e2847e80_0 .var "cmd", 7 0;
v0x7e2847f20_0 .var "data", 7 0;
v0x7e2848000_0 .var "rx", 7 0;
TD_tb_top_system.spi_read_reg ;
    %pushi/vec4 0, 0, 1;
    %concati/vec4 1, 0, 1;
    %load/vec4 v0x7e2847de0_0;
    %concat/vec4; draw_concat_vec4
    %store/vec4 v0x7e2847e80_0, 0, 8;
    %delay 50, 0;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x7e2848640_0, 0, 1;
    %load/vec4 v0x7e2847e80_0;
    %store/vec4 v0x7e28481e0_0, 0, 8;
    %fork TD_tb_top_system.spi_transfer_byte, S_0x7e284c000;
    %join;
    %load/vec4 v0x7e2848140_0;
    %store/vec4 v0x7e2848000_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x7e28481e0_0, 0, 8;
    %fork TD_tb_top_system.spi_transfer_byte, S_0x7e284c000;
    %join;
    %load/vec4 v0x7e2848140_0;
    %store/vec4 v0x7e2847f20_0, 0, 8;
    %delay 50, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x7e2848640_0, 0, 1;
    %vpi_call/w 3 136 "$display", "Time %0t: SPI READ   addr=0x%02h  data=0x%02h", $time, v0x7e2847de0_0, v0x7e2847f20_0 {0 0 0};
    %delay 200, 0;
    %end;
S_0x7e284c000 .scope task, "spi_transfer_byte" "spi_transfer_byte" 3 81, 3 81 0, S_0x100e6a5d0;
 .timescale -9 -9;
v0x7e28480a0_0 .var/i "i", 31 0;
v0x7e2848140_0 .var "rx", 7 0;
v0x7e28481e0_0 .var "tx", 7 0;
TD_tb_top_system.spi_transfer_byte ;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x7e2848140_0, 0, 8;
    %pushi/vec4 7, 0, 32;
    %store/vec4 v0x7e28480a0_0, 0, 32;
T_3.7 ;
    %load/vec4 v0x7e28480a0_0;
    %cmpi/s 0, 0, 32;
    %flag_inv 5; GE is !LT
    %jmp/0xz T_3.8, 5;
    %load/vec4 v0x7e28481e0_0;
    %load/vec4 v0x7e28480a0_0;
    %part/s 1;
    %store/vec4 v0x7e2848960_0, 0, 1;
    %delay 50, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x7e2848820_0, 0, 1;
    %delay 25, 0;
    %load/vec4 v0x7e28488c0_0;
    %ix/getv/s 4, v0x7e28480a0_0;
    %store/vec4 v0x7e2848140_0, 4, 1;
    %delay 25, 0;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x7e2848820_0, 0, 1;
    %load/vec4 v0x7e28480a0_0;
    %subi 1, 0, 32;
    %store/vec4 v0x7e28480a0_0, 0, 32;
    %jmp T_3.7;
T_3.8 ;
    %end;
S_0x7e284c180 .scope task, "spi_write_reg" "spi_write_reg" 3 99, 3 99 0, S_0x100e6a5d0;
 .timescale -9 -9;
v0x7e2848280_0 .var "addr", 5 0;
v0x7e2848320_0 .var "cmd", 7 0;
v0x7e28483c0_0 .var "data", 7 0;
v0x7e2848460_0 .var "dummy", 7 0;
TD_tb_top_system.spi_write_reg ;
    %pushi/vec4 1, 0, 1;
    %concati/vec4 1, 0, 1;
    %load/vec4 v0x7e2848280_0;
    %concat/vec4; draw_concat_vec4
    %store/vec4 v0x7e2848320_0, 0, 8;
    %delay 50, 0;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x7e2848640_0, 0, 1;
    %load/vec4 v0x7e2848320_0;
    %store/vec4 v0x7e28481e0_0, 0, 8;
    %fork TD_tb_top_system.spi_transfer_byte, S_0x7e284c000;
    %join;
    %load/vec4 v0x7e2848140_0;
    %store/vec4 v0x7e2848460_0, 0, 8;
    %load/vec4 v0x7e28483c0_0;
    %store/vec4 v0x7e28481e0_0, 0, 8;
    %fork TD_tb_top_system.spi_transfer_byte, S_0x7e284c000;
    %join;
    %load/vec4 v0x7e2848140_0;
    %store/vec4 v0x7e2848460_0, 0, 8;
    %delay 50, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x7e2848640_0, 0, 1;
    %vpi_call/w 3 115 "$display", "Time %0t: SPI WRITE  addr=0x%02h  data=0x%02h", $time, v0x7e2848280_0, v0x7e28483c0_0 {0 0 0};
    %delay 200, 0;
    %end;
    .scope S_0x100e73f40;
T_5 ;
    %wait E_0x7e3076580;
    %load/vec4 v0x7e2846c60_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_5.0, 8;
    %pushi/vec4 0, 0, 3;
    %assign/vec4 v0x7e28464e0_0, 0;
    %pushi/vec4 0, 0, 8;
    %assign/vec4 v0x7e2846da0_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e2846580_0, 0;
    %jmp T_5.1;
T_5.0 ;
    %load/vec4 v0x7e2846760_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_5.2, 8;
    %pushi/vec4 0, 0, 3;
    %assign/vec4 v0x7e28464e0_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e2846580_0, 0;
    %jmp T_5.3;
T_5.2 ;
    %load/vec4 v0x7e2846da0_0;
    %parti/s 7, 0, 2;
    %load/vec4 v0x7e28469e0_0;
    %concat/vec4; draw_concat_vec4
    %assign/vec4 v0x7e2846da0_0, 0;
    %load/vec4 v0x7e28464e0_0;
    %addi 1, 0, 3;
    %assign/vec4 v0x7e28464e0_0, 0;
    %load/vec4 v0x7e28464e0_0;
    %cmpi/e 7, 0, 3;
    %jmp/0xz  T_5.4, 4;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x7e2846580_0, 0;
    %jmp T_5.5;
T_5.4 ;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e2846580_0, 0;
T_5.5 ;
T_5.3 ;
T_5.1 ;
    %jmp T_5;
    .thread T_5;
    .scope S_0x100e73f40;
T_6 ;
    %wait E_0x7e3076540;
    %load/vec4 v0x7e2846c60_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/1 T_6.2, 8;
    %load/vec4 v0x7e2846760_0;
    %flag_set/vec4 9;
    %flag_or 8, 9;
T_6.2;
    %jmp/0xz  T_6.0, 8;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e2846bc0_0, 0;
    %jmp T_6.1;
T_6.0 ;
    %load/vec4 v0x7e28468a0_0;
    %pushi/vec4 7, 0, 32;
    %load/vec4 v0x7e28464e0_0;
    %pad/u 32;
    %sub;
    %part/u 1;
    %assign/vec4 v0x7e2846bc0_0, 0;
T_6.1 ;
    %jmp T_6;
    .thread T_6;
    .scope S_0x100e73f40;
T_7 ;
    %wait E_0x7e30764c0;
    %load/vec4 v0x7e2846c60_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_7.0, 8;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e2846a80_0, 0;
    %pushi/vec4 0, 0, 8;
    %assign/vec4 v0x7e2846b20_0, 0;
    %jmp T_7.1;
T_7.0 ;
    %load/vec4 v0x7e2846580_0;
    %assign/vec4 v0x7e2846a80_0, 0;
    %load/vec4 v0x7e2846580_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_7.2, 8;
    %load/vec4 v0x7e2846da0_0;
    %assign/vec4 v0x7e2846b20_0, 0;
T_7.2 ;
T_7.1 ;
    %jmp T_7;
    .thread T_7;
    .scope S_0x100e65c20;
T_8 ;
    %wait E_0x7e30764c0;
    %load/vec4 v0x7e2844aa0_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_8.0, 8;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e2844be0_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e2844b40_0, 0;
    %pushi/vec4 0, 0, 6;
    %assign/vec4 v0x7e28443c0_0, 0;
    %pushi/vec4 0, 0, 8;
    %assign/vec4 v0x7e28446e0_0, 0;
    %pushi/vec4 0, 0, 8;
    %assign/vec4 v0x7e28448c0_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e2844a00_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e2844d20_0, 0;
    %jmp T_8.1;
T_8.0 ;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e2844a00_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e2844d20_0, 0;
    %load/vec4 v0x7e2844460_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_8.2, 8;
    %load/vec4 v0x7e2844be0_0;
    %dup/vec4;
    %pushi/vec4 0, 0, 1;
    %cmp/u;
    %jmp/1 T_8.4, 6;
    %dup/vec4;
    %pushi/vec4 1, 0, 1;
    %cmp/u;
    %jmp/1 T_8.5, 6;
    %jmp T_8.6;
T_8.4 ;
    %load/vec4 v0x7e28445a0_0;
    %parti/s 1, 7, 4;
    %assign/vec4 v0x7e2844b40_0, 0;
    %load/vec4 v0x7e28445a0_0;
    %parti/s 6, 0, 2;
    %assign/vec4 v0x7e28443c0_0, 0;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x7e2844be0_0, 0;
    %jmp T_8.6;
T_8.5 ;
    %load/vec4 v0x7e2844b40_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_8.7, 8;
    %load/vec4 v0x7e28445a0_0;
    %assign/vec4 v0x7e28448c0_0, 0;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x7e2844d20_0, 0;
    %jmp T_8.8;
T_8.7 ;
    %load/vec4 v0x7e2844780_0;
    %assign/vec4 v0x7e28446e0_0, 0;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x7e2844a00_0, 0;
T_8.8 ;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e2844be0_0, 0;
    %jmp T_8.6;
T_8.6 ;
    %pop/vec4 1;
T_8.2 ;
T_8.1 ;
    %jmp T_8;
    .thread T_8;
    .scope S_0x100e73b00;
T_9 ;
    %wait E_0x7e30764c0;
    %load/vec4 v0x7e2846300_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_9.0, 8;
    %pushi/vec4 0, 0, 16;
    %assign/vec4 v0x7e2845fe0_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e2845ea0_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e2845d60_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e28461c0_0, 0;
    %pushi/vec4 0, 0, 8;
    %assign/vec4 v0x7e2846080_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e2846120_0, 0;
    %pushi/vec4 0, 0, 8;
    %assign/vec4 v0x7e2845f40_0, 0;
    %pushi/vec4 0, 0, 16;
    %assign/vec4 v0x7e2845c20_0, 0;
    %pushi/vec4 0, 0, 16;
    %assign/vec4 v0x7e2845cc0_0, 0;
    %jmp T_9.1;
T_9.0 ;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e2845d60_0, 0;
    %load/vec4 v0x7e2846440_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_9.2, 8;
    %load/vec4 v0x7e2845400_0;
    %dup/vec4;
    %pushi/vec4 0, 0, 6;
    %cmp/u;
    %jmp/1 T_9.4, 6;
    %dup/vec4;
    %pushi/vec4 1, 0, 6;
    %cmp/u;
    %jmp/1 T_9.5, 6;
    %dup/vec4;
    %pushi/vec4 2, 0, 6;
    %cmp/u;
    %jmp/1 T_9.6, 6;
    %dup/vec4;
    %pushi/vec4 3, 0, 6;
    %cmp/u;
    %jmp/1 T_9.7, 6;
    %dup/vec4;
    %pushi/vec4 4, 0, 6;
    %cmp/u;
    %jmp/1 T_9.8, 6;
    %dup/vec4;
    %pushi/vec4 5, 0, 6;
    %cmp/u;
    %jmp/1 T_9.9, 6;
    %dup/vec4;
    %pushi/vec4 6, 0, 6;
    %cmp/u;
    %jmp/1 T_9.10, 6;
    %dup/vec4;
    %pushi/vec4 7, 0, 6;
    %cmp/u;
    %jmp/1 T_9.11, 6;
    %dup/vec4;
    %pushi/vec4 10, 0, 6;
    %cmp/u;
    %jmp/1 T_9.12, 6;
    %dup/vec4;
    %pushi/vec4 11, 0, 6;
    %cmp/u;
    %jmp/1 T_9.13, 6;
    %dup/vec4;
    %pushi/vec4 12, 0, 6;
    %cmp/u;
    %jmp/1 T_9.14, 6;
    %dup/vec4;
    %pushi/vec4 13, 0, 6;
    %cmp/u;
    %jmp/1 T_9.15, 6;
    %jmp T_9.16;
T_9.4 ;
    %load/vec4 v0x7e2845860_0;
    %ix/load 4, 0, 0;
    %ix/load 5, 0, 0;
    %flag_set/imm 4, 0;
    %assign/vec4/off/d v0x7e2845fe0_0, 4, 5;
    %jmp T_9.16;
T_9.5 ;
    %load/vec4 v0x7e2845860_0;
    %ix/load 4, 8, 0;
    %ix/load 5, 0, 0;
    %flag_set/imm 4, 0;
    %assign/vec4/off/d v0x7e2845fe0_0, 4, 5;
    %jmp T_9.16;
T_9.6 ;
    %load/vec4 v0x7e2845860_0;
    %parti/s 1, 0, 2;
    %assign/vec4 v0x7e2845ea0_0, 0;
    %jmp T_9.16;
T_9.7 ;
    %load/vec4 v0x7e2845860_0;
    %ix/load 4, 0, 0;
    %ix/load 5, 0, 0;
    %flag_set/imm 4, 0;
    %assign/vec4/off/d v0x7e2845c20_0, 4, 5;
    %jmp T_9.16;
T_9.8 ;
    %load/vec4 v0x7e2845860_0;
    %ix/load 4, 8, 0;
    %ix/load 5, 0, 0;
    %flag_set/imm 4, 0;
    %assign/vec4/off/d v0x7e2845c20_0, 4, 5;
    %jmp T_9.16;
T_9.9 ;
    %load/vec4 v0x7e2845860_0;
    %ix/load 4, 0, 0;
    %ix/load 5, 0, 0;
    %flag_set/imm 4, 0;
    %assign/vec4/off/d v0x7e2845cc0_0, 4, 5;
    %jmp T_9.16;
T_9.10 ;
    %load/vec4 v0x7e2845860_0;
    %ix/load 4, 8, 0;
    %ix/load 5, 0, 0;
    %flag_set/imm 4, 0;
    %assign/vec4/off/d v0x7e2845cc0_0, 4, 5;
    %jmp T_9.16;
T_9.11 ;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x7e2845d60_0, 0;
    %jmp T_9.16;
T_9.12 ;
    %load/vec4 v0x7e2845860_0;
    %assign/vec4 v0x7e2846080_0, 0;
    %jmp T_9.16;
T_9.13 ;
    %load/vec4 v0x7e2845860_0;
    %parti/s 1, 0, 2;
    %assign/vec4 v0x7e28461c0_0, 0;
    %jmp T_9.16;
T_9.14 ;
    %load/vec4 v0x7e2845860_0;
    %parti/s 1, 0, 2;
    %assign/vec4 v0x7e2846120_0, 0;
    %jmp T_9.16;
T_9.15 ;
    %load/vec4 v0x7e2845860_0;
    %assign/vec4 v0x7e2845f40_0, 0;
    %jmp T_9.16;
T_9.16 ;
    %pop/vec4 1;
T_9.2 ;
T_9.1 ;
    %jmp T_9;
    .thread T_9;
    .scope S_0x100e73b00;
T_10 ;
    %wait E_0x7e3076500;
    %load/vec4 v0x7e2846260_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_10.0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x7e2845e00_0, 0, 8;
    %jmp T_10.1;
T_10.0 ;
    %load/vec4 v0x7e2845400_0;
    %dup/vec4;
    %pushi/vec4 0, 0, 6;
    %cmp/u;
    %jmp/1 T_10.2, 6;
    %dup/vec4;
    %pushi/vec4 1, 0, 6;
    %cmp/u;
    %jmp/1 T_10.3, 6;
    %dup/vec4;
    %pushi/vec4 2, 0, 6;
    %cmp/u;
    %jmp/1 T_10.4, 6;
    %dup/vec4;
    %pushi/vec4 3, 0, 6;
    %cmp/u;
    %jmp/1 T_10.5, 6;
    %dup/vec4;
    %pushi/vec4 4, 0, 6;
    %cmp/u;
    %jmp/1 T_10.6, 6;
    %dup/vec4;
    %pushi/vec4 5, 0, 6;
    %cmp/u;
    %jmp/1 T_10.7, 6;
    %dup/vec4;
    %pushi/vec4 6, 0, 6;
    %cmp/u;
    %jmp/1 T_10.8, 6;
    %dup/vec4;
    %pushi/vec4 7, 0, 6;
    %cmp/u;
    %jmp/1 T_10.9, 6;
    %dup/vec4;
    %pushi/vec4 8, 0, 6;
    %cmp/u;
    %jmp/1 T_10.10, 6;
    %dup/vec4;
    %pushi/vec4 9, 0, 6;
    %cmp/u;
    %jmp/1 T_10.11, 6;
    %dup/vec4;
    %pushi/vec4 10, 0, 6;
    %cmp/u;
    %jmp/1 T_10.12, 6;
    %dup/vec4;
    %pushi/vec4 11, 0, 6;
    %cmp/u;
    %jmp/1 T_10.13, 6;
    %dup/vec4;
    %pushi/vec4 12, 0, 6;
    %cmp/u;
    %jmp/1 T_10.14, 6;
    %dup/vec4;
    %pushi/vec4 13, 0, 6;
    %cmp/u;
    %jmp/1 T_10.15, 6;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x7e2845e00_0, 0, 8;
    %jmp T_10.17;
T_10.2 ;
    %load/vec4 v0x7e2845fe0_0;
    %parti/s 8, 0, 2;
    %store/vec4 v0x7e2845e00_0, 0, 8;
    %jmp T_10.17;
T_10.3 ;
    %load/vec4 v0x7e2845fe0_0;
    %parti/s 8, 8, 5;
    %store/vec4 v0x7e2845e00_0, 0, 8;
    %jmp T_10.17;
T_10.4 ;
    %pushi/vec4 0, 0, 7;
    %load/vec4 v0x7e2845ea0_0;
    %concat/vec4; draw_concat_vec4
    %store/vec4 v0x7e2845e00_0, 0, 8;
    %jmp T_10.17;
T_10.5 ;
    %load/vec4 v0x7e2845c20_0;
    %parti/s 8, 0, 2;
    %store/vec4 v0x7e2845e00_0, 0, 8;
    %jmp T_10.17;
T_10.6 ;
    %load/vec4 v0x7e2845c20_0;
    %parti/s 8, 8, 5;
    %store/vec4 v0x7e2845e00_0, 0, 8;
    %jmp T_10.17;
T_10.7 ;
    %load/vec4 v0x7e2845cc0_0;
    %parti/s 8, 0, 2;
    %store/vec4 v0x7e2845e00_0, 0, 8;
    %jmp T_10.17;
T_10.8 ;
    %load/vec4 v0x7e2845cc0_0;
    %parti/s 8, 8, 5;
    %store/vec4 v0x7e2845e00_0, 0, 8;
    %jmp T_10.17;
T_10.9 ;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x7e2845e00_0, 0, 8;
    %jmp T_10.17;
T_10.10 ;
    %load/vec4 v0x7e2845720_0;
    %parti/s 8, 0, 2;
    %store/vec4 v0x7e2845e00_0, 0, 8;
    %jmp T_10.17;
T_10.11 ;
    %load/vec4 v0x7e2845720_0;
    %parti/s 8, 8, 5;
    %store/vec4 v0x7e2845e00_0, 0, 8;
    %jmp T_10.17;
T_10.12 ;
    %load/vec4 v0x7e2846080_0;
    %store/vec4 v0x7e2845e00_0, 0, 8;
    %jmp T_10.17;
T_10.13 ;
    %pushi/vec4 0, 0, 7;
    %load/vec4 v0x7e28461c0_0;
    %concat/vec4; draw_concat_vec4
    %store/vec4 v0x7e2845e00_0, 0, 8;
    %jmp T_10.17;
T_10.14 ;
    %pushi/vec4 0, 0, 7;
    %load/vec4 v0x7e2846120_0;
    %concat/vec4; draw_concat_vec4
    %store/vec4 v0x7e2845e00_0, 0, 8;
    %jmp T_10.17;
T_10.15 ;
    %load/vec4 v0x7e2845f40_0;
    %store/vec4 v0x7e2845e00_0, 0, 8;
    %jmp T_10.17;
T_10.17 ;
    %pop/vec4 1;
T_10.1 ;
    %jmp T_10;
    .thread T_10, $push;
    .scope S_0x100e68020;
T_11 ;
    %wait E_0x7e30764c0;
    %load/vec4 v0x7e28441e0_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_11.0, 8;
    %pushi/vec4 0, 0, 16;
    %assign/vec4 v0x100e65ae0_0, 0;
    %pushi/vec4 0, 0, 8;
    %assign/vec4 v0x7e2844140_0, 0;
    %jmp T_11.1;
T_11.0 ;
    %load/vec4 v0x100e67530_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_11.2, 8;
    %pushi/vec4 0, 0, 16;
    %assign/vec4 v0x100e65ae0_0, 0;
    %pushi/vec4 0, 0, 8;
    %assign/vec4 v0x7e2844140_0, 0;
    %jmp T_11.3;
T_11.2 ;
    %load/vec4 v0x100e65b80_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_11.4, 8;
    %load/vec4 v0x7e2844140_0;
    %load/vec4 v0x7e28440a0_0;
    %cmp/e;
    %jmp/0xz  T_11.6, 4;
    %pushi/vec4 0, 0, 8;
    %assign/vec4 v0x7e2844140_0, 0;
    %load/vec4 v0x7e2844280_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_11.8, 8;
    %load/vec4 v0x100e65ae0_0;
    %load/vec4 v0x7e2844000_0;
    %cmp/e;
    %jmp/0xz  T_11.10, 4;
    %pushi/vec4 0, 0, 16;
    %assign/vec4 v0x100e65ae0_0, 0;
    %jmp T_11.11;
T_11.10 ;
    %load/vec4 v0x100e65ae0_0;
    %addi 1, 0, 16;
    %assign/vec4 v0x100e65ae0_0, 0;
T_11.11 ;
    %jmp T_11.9;
T_11.8 ;
    %load/vec4 v0x100e65ae0_0;
    %pad/u 32;
    %cmpi/e 0, 0, 32;
    %jmp/0xz  T_11.12, 4;
    %load/vec4 v0x7e2844000_0;
    %assign/vec4 v0x100e65ae0_0, 0;
    %jmp T_11.13;
T_11.12 ;
    %load/vec4 v0x100e65ae0_0;
    %subi 1, 0, 16;
    %assign/vec4 v0x100e65ae0_0, 0;
T_11.13 ;
T_11.9 ;
    %jmp T_11.7;
T_11.6 ;
    %load/vec4 v0x7e2844140_0;
    %addi 1, 0, 8;
    %assign/vec4 v0x7e2844140_0, 0;
T_11.7 ;
T_11.4 ;
T_11.3 ;
T_11.1 ;
    %jmp T_11;
    .thread T_11;
    .scope S_0x100e73980;
T_12 ;
    %wait E_0x7e30764c0;
    %load/vec4 v0x7e2845360_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_12.0, 8;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e28452c0_0, 0;
    %jmp T_12.1;
T_12.0 ;
    %load/vec4 v0x7e2845180_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_12.2, 8;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e28452c0_0, 0;
    %jmp T_12.3;
T_12.2 ;
    %load/vec4 v0x7e2844e60_0;
    %pad/u 32;
    %cmpi/e 0, 0, 32;
    %jmp/1 T_12.6, 4;
    %flag_mov 8, 4;
    %load/vec4 v0x7e2844e60_0;
    %load/vec4 v0x7e2844f00_0;
    %cmp/e;
    %flag_or 4, 8;
T_12.6;
    %jmp/0xz  T_12.4, 4;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e28452c0_0, 0;
    %jmp T_12.5;
T_12.4 ;
    %load/vec4 v0x7e2845040_0;
    %parti/s 2, 0, 2;
    %dup/vec4;
    %pushi/vec4 0, 0, 2;
    %cmp/u;
    %jmp/1 T_12.7, 6;
    %dup/vec4;
    %pushi/vec4 1, 0, 2;
    %cmp/u;
    %jmp/1 T_12.8, 6;
    %dup/vec4;
    %pushi/vec4 2, 0, 2;
    %cmp/u;
    %jmp/1 T_12.9, 6;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x7e28452c0_0, 0;
    %jmp T_12.11;
T_12.7 ;
    %load/vec4 v0x7e2844fa0_0;
    %load/vec4 v0x7e2844e60_0;
    %cmp/u;
    %flag_get/vec4 4;
    %flag_get/vec4 5;
    %or;
    %assign/vec4 v0x7e28452c0_0, 0;
    %jmp T_12.11;
T_12.8 ;
    %load/vec4 v0x7e2844e60_0;
    %load/vec4 v0x7e2844fa0_0;
    %cmp/u;
    %flag_get/vec4 4;
    %flag_get/vec4 5;
    %or;
    %assign/vec4 v0x7e28452c0_0, 0;
    %jmp T_12.11;
T_12.9 ;
    %load/vec4 v0x7e2844e60_0;
    %load/vec4 v0x7e2844fa0_0;
    %cmp/u;
    %flag_or 5, 4;
    %flag_get/vec4 5;
    %jmp/0 T_12.12, 5;
    %load/vec4 v0x7e2844fa0_0;
    %load/vec4 v0x7e2844f00_0;
    %cmp/u;
    %flag_get/vec4 5;
    %and;
T_12.12;
    %assign/vec4 v0x7e28452c0_0, 0;
    %jmp T_12.11;
T_12.11 ;
    %pop/vec4 1;
T_12.5 ;
T_12.3 ;
T_12.1 ;
    %jmp T_12;
    .thread T_12;
    .scope S_0x100e6a5d0;
T_13 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x7e2848500_0, 0, 1;
T_13.0 ;
    %delay 50, 0;
    %load/vec4 v0x7e2848500_0;
    %inv;
    %store/vec4 v0x7e2848500_0, 0, 1;
    %jmp T_13.0;
    %end;
    .thread T_13;
    .scope S_0x100e6a5d0;
T_14 ;
    %vpi_call/w 3 52 "$dumpfile", "waves.vcd" {0 0 0};
    %vpi_call/w 3 53 "$dumpvars", 32'sb00000000000000000000000000000000, S_0x100e6a5d0 {0 0 0};
    %vpi_call/w 3 57 "$dumpvars", 32'sb00000000000000000000000000000000, v0x7e2845fe0_0 {0 0 0};
    %vpi_call/w 3 58 "$dumpvars", 32'sb00000000000000000000000000000000, v0x7e2845c20_0 {0 0 0};
    %vpi_call/w 3 59 "$dumpvars", 32'sb00000000000000000000000000000000, v0x7e2845ea0_0 {0 0 0};
    %vpi_call/w 3 60 "$dumpvars", 32'sb00000000000000000000000000000000, v0x7e2846120_0 {0 0 0};
    %vpi_call/w 3 61 "$dumpvars", 32'sb00000000000000000000000000000000, v0x7e2845f40_0 {0 0 0};
    %vpi_call/w 3 62 "$dumpvars", 32'sb00000000000000000000000000000000, v0x7e2846080_0 {0 0 0};
    %vpi_call/w 3 63 "$dumpvars", 32'sb00000000000000000000000000000000, v0x100e65ae0_0 {0 0 0};
    %vpi_call/w 3 64 "$dumpvars", 32'sb00000000000000000000000000000000, v0x7e2844140_0 {0 0 0};
    %vpi_call/w 3 65 "$dumpvars", 32'sb00000000000000000000000000000000, v0x7e28452c0_0 {0 0 0};
    %end;
    .thread T_14;
    .scope S_0x100e6a5d0;
T_15 ;
    %vpi_call/w 3 173 "$display", "--- Starting Testbench ---" {0 0 0};
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x7e2848780_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x7e2848640_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x7e2848820_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x7e2848960_0, 0, 1;
    %fork TD_tb_top_system.apply_reset, S_0x100e72fe0;
    %join;
    %pushi/vec4 0, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 7, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 10, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 3, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 3, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 2, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 1, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 12, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 1, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 13, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 7, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 1, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 7, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %vpi_call/w 3 192 "$display", "\012--- Test 1: PWM ALIGN_LEFT, compare1=3, period=7 ---" {0 0 0};
    %pushi/vec4 7, 0, 32;
    %store/vec4 v0x100e69c10_0, 0, 32;
    %pushi/vec4 4, 0, 32;
    %store/vec4 v0x100e6b4e0_0, 0, 32;
    %pushi/vec4 5, 0, 32;
    %store/vec4 v0x100e69b70_0, 0, 32;
    %fork TD_tb_top_system.check_pwm_duty, S_0x100e6b2c0;
    %join;
    %pushi/vec4 8, 0, 6;
    %store/vec4 v0x7e2847de0_0, 0, 6;
    %fork TD_tb_top_system.spi_read_reg, S_0x100e742a0;
    %join;
    %load/vec4 v0x7e2847f20_0;
    %store/vec4 v0x7e28485a0_0, 0, 8;
    %vpi_call/w 3 198 "$display", "\012--- Test 2: PWM RANGE_BETWEEN_COMPARES, c1=2, c2=6 ---" {0 0 0};
    %pushi/vec4 3, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 2, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 5, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 6, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 13, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 2, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 7, 0, 32;
    %store/vec4 v0x100e69c10_0, 0, 32;
    %pushi/vec4 4, 0, 32;
    %store/vec4 v0x100e6b4e0_0, 0, 32;
    %pushi/vec4 5, 0, 32;
    %store/vec4 v0x100e69b70_0, 0, 32;
    %fork TD_tb_top_system.check_pwm_duty, S_0x100e6b2c0;
    %join;
    %vpi_call/w 3 205 "$display", "\012--- Test 3: PWM ALIGN_RIGHT, compare1=5 ---" {0 0 0};
    %pushi/vec4 3, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 5, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 13, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 1, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 7, 0, 32;
    %store/vec4 v0x100e69c10_0, 0, 32;
    %pushi/vec4 3, 0, 32;
    %store/vec4 v0x100e6b4e0_0, 0, 32;
    %pushi/vec4 5, 0, 32;
    %store/vec4 v0x100e69b70_0, 0, 32;
    %fork TD_tb_top_system.check_pwm_duty, S_0x100e6b2c0;
    %join;
    %vpi_call/w 3 211 "$display", "\012--- Test 4: PWM UNALIGNED EDGE CASE EQUAL COMPARES ---" {0 0 0};
    %pushi/vec4 2, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 3, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 5, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 5, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 5, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 2, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 1, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 7, 0, 32;
    %store/vec4 v0x100e69c10_0, 0, 32;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x100e6b4e0_0, 0, 32;
    %pushi/vec4 2, 0, 32;
    %store/vec4 v0x100e69b70_0, 0, 32;
    %fork TD_tb_top_system.check_pwm_duty, S_0x100e6b2c0;
    %join;
    %vpi_call/w 3 218 "$display", "\012--- Test 5: PWM NOT TRIGGER AT START, compare1=0 ---" {0 0 0};
    %pushi/vec4 2, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 3, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 13, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 2, 0, 6;
    %store/vec4 v0x7e2848280_0, 0, 6;
    %pushi/vec4 1, 0, 8;
    %store/vec4 v0x7e28483c0_0, 0, 8;
    %fork TD_tb_top_system.spi_write_reg, S_0x7e284c180;
    %join;
    %pushi/vec4 7, 0, 32;
    %store/vec4 v0x100e69c10_0, 0, 32;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x100e6b4e0_0, 0, 32;
    %pushi/vec4 3, 0, 32;
    %store/vec4 v0x100e69b70_0, 0, 32;
    %fork TD_tb_top_system.check_pwm_duty, S_0x100e6b2c0;
    %join;
    %vpi_call/w 3 225 "$display", "\012--- Finished Testbench ---" {0 0 0};
    %vpi_call/w 3 226 "$finish" {0 0 0};
    %end;
    .thread T_15;
# The file index is used to find the file name in the following table.
:file_names 10;
    "N/A";
    "<interactive>";
    "-";
    "tb_top.v";
    "top.v";
    "counter.v";
    "instr_dcd.v";
    "pwm_gen.v";
    "regs.v";
    "spi_bridge.v";
